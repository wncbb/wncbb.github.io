---
title: "FlowControl"
date: 2021-11-17T10:31:10+08:00
draft: true
---

1. 时间窗口

固定时间窗口，比如对于 [t1, t2), [t2, t3)... 时间窗口，每个窗口限流100qps

存在的问题：如果[t1+(t2-t1)/2, t2)时间内有99个请求，[t2, t2+(t3-t2)/2)有99个请求，

不会违反设定，但是[t1+(t2-t1)/2, t2+(t3-t2)/2)时间窗口内有198个qps

2. 滑动时间窗口

又名滑动时间算法，所谓的滑动时间算法指的是以当前时间为截止时间，

往前取一定的时间，比如取60s的时间，在这60s时间内最大的访问数为100。

此时算法的执行逻辑为，先清除这60s 之前的所有请求记录，

再计算当前集合内请求数是否大于设定的最大请求数100，如果大于100则执行限流拒绝策略，

否则插入本次请求记录并返回可以正常执行的标识给客户端。


3. 漏桶算法

4. 令牌桶算法




